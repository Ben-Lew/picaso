

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Model Formating Overview &mdash; picaso 2.3 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../_static/doctools.js"></script>
        <script type="text/javascript" src="../../_static/language_data.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
        <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
        <script type="text/x-mathjax-config">MathJax.Hub.Config({"tex2jax": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true, "ignoreClass": "document", "processClass": "math|output_area"}})</script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home"> picaso
          

          
          </a>

          
            
            
              <div class="version">
                2.3
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tutorials.html">The Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../picaso.html">The Code</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../contribution.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../workshops.html">Workshop Material</a></li>
<li class="toctree-l1"><a class="reference external" href="https://natashabatalha.github.io/picaso_dev">The Derivations</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/natashabatalha/picaso">Github</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../credit.html">The Papers</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">picaso</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
      <li>Model Formating Overview</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/notebooks/codehelp/data_uniformity_tutorial.ipynb.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  
<style>
/* CSS for nbsphinx extension */

/* remove conflicting styling from Sphinx themes */
div.nbinput.container,
div.nbinput.container div.prompt,
div.nbinput.container div.input_area,
div.nbinput.container div[class*=highlight],
div.nbinput.container div[class*=highlight] pre,
div.nboutput.container,
div.nboutput.container div.prompt,
div.nboutput.container div.output_area,
div.nboutput.container div[class*=highlight],
div.nboutput.container div[class*=highlight] pre {
    background: none;
    border: none;
    padding: 0 0;
    margin: 0;
    box-shadow: none;
}

/* avoid gaps between output lines */
div.nboutput.container div[class*=highlight] pre {
    line-height: normal;
}

/* input/output containers */
div.nbinput.container,
div.nboutput.container {
    display: -webkit-flex;
    display: flex;
    align-items: flex-start;
    margin: 0;
    width: 100%;
}
@media (max-width: 540px) {
    div.nbinput.container,
    div.nboutput.container {
        flex-direction: column;
    }
}

/* input container */
div.nbinput.container {
    padding-top: 5px;
}

/* last container */
div.nblast.container {
    padding-bottom: 5px;
}

/* input prompt */
div.nbinput.container div.prompt pre {
    color: #307FC1;
}

/* output prompt */
div.nboutput.container div.prompt pre {
    color: #BF5B3D;
}

/* all prompts */
div.nbinput.container div.prompt,
div.nboutput.container div.prompt {
    min-width: 5ex;
    padding-top: 0.3rem;
    padding-right: 0.3rem;
    text-align: right;
    flex: 0;
}
@media (max-width: 540px) {
    div.nbinput.container div.prompt,
    div.nboutput.container div.prompt {
        text-align: left;
        padding: 0.4em;
    }
    div.nboutput.container div.prompt.empty {
        padding: 0;
    }
}

/* disable scrollbars on prompts */
div.nbinput.container div.prompt pre,
div.nboutput.container div.prompt pre {
    overflow: hidden;
}

/* input/output area */
div.nbinput.container div.input_area,
div.nboutput.container div.output_area {
    -webkit-flex: 1;
    flex: 1;
    overflow: auto;
}
@media (max-width: 540px) {
    div.nbinput.container div.input_area,
    div.nboutput.container div.output_area {
        width: 100%;
    }
}

/* input area */
div.nbinput.container div.input_area {
    border: 1px solid #e0e0e0;
    border-radius: 2px;
    background: #f5f5f5;
}

/* override MathJax center alignment in output cells */
div.nboutput.container div[class*=MathJax] {
    text-align: left !important;
}

/* override sphinx.ext.imgmath center alignment in output cells */
div.nboutput.container div.math p {
    text-align: left;
}

/* standard error */
div.nboutput.container div.output_area.stderr {
    background: #fdd;
}

/* ANSI colors */
.ansi-black-fg { color: #3E424D; }
.ansi-black-bg { background-color: #3E424D; }
.ansi-black-intense-fg { color: #282C36; }
.ansi-black-intense-bg { background-color: #282C36; }
.ansi-red-fg { color: #E75C58; }
.ansi-red-bg { background-color: #E75C58; }
.ansi-red-intense-fg { color: #B22B31; }
.ansi-red-intense-bg { background-color: #B22B31; }
.ansi-green-fg { color: #00A250; }
.ansi-green-bg { background-color: #00A250; }
.ansi-green-intense-fg { color: #007427; }
.ansi-green-intense-bg { background-color: #007427; }
.ansi-yellow-fg { color: #DDB62B; }
.ansi-yellow-bg { background-color: #DDB62B; }
.ansi-yellow-intense-fg { color: #B27D12; }
.ansi-yellow-intense-bg { background-color: #B27D12; }
.ansi-blue-fg { color: #208FFB; }
.ansi-blue-bg { background-color: #208FFB; }
.ansi-blue-intense-fg { color: #0065CA; }
.ansi-blue-intense-bg { background-color: #0065CA; }
.ansi-magenta-fg { color: #D160C4; }
.ansi-magenta-bg { background-color: #D160C4; }
.ansi-magenta-intense-fg { color: #A03196; }
.ansi-magenta-intense-bg { background-color: #A03196; }
.ansi-cyan-fg { color: #60C6C8; }
.ansi-cyan-bg { background-color: #60C6C8; }
.ansi-cyan-intense-fg { color: #258F8F; }
.ansi-cyan-intense-bg { background-color: #258F8F; }
.ansi-white-fg { color: #C5C1B4; }
.ansi-white-bg { background-color: #C5C1B4; }
.ansi-white-intense-fg { color: #A1A6B2; }
.ansi-white-intense-bg { background-color: #A1A6B2; }

.ansi-default-inverse-fg { color: #FFFFFF; }
.ansi-default-inverse-bg { background-color: #000000; }

.ansi-bold { font-weight: bold; }
.ansi-underline { text-decoration: underline; }


div.nbinput.container div.input_area div[class*=highlight] > pre,
div.nboutput.container div.output_area div[class*=highlight] > pre,
div.nboutput.container div.output_area div[class*=highlight].math,
div.nboutput.container div.output_area.rendered_html,
div.nboutput.container div.output_area > div.output_javascript,
div.nboutput.container div.output_area:not(.rendered_html) > img{
    padding: 0.3rem;
}

/* fix copybtn overflow problem in chromium (needed for 'sphinx_copybutton') */
div.nbinput.container div.input_area > div[class^='highlight'],
div.nboutput.container div.output_area > div[class^='highlight']{
    overflow-y: hidden;
}

/* hide copybtn icon on prompts (needed for 'sphinx_copybutton') */
.prompt a.copybtn {
    display: none;
}

/* Some additional styling taken form the Jupyter notebook CSS */
div.rendered_html table {
  border: none;
  border-collapse: collapse;
  border-spacing: 0;
  color: black;
  font-size: 12px;
  table-layout: fixed;
}
div.rendered_html thead {
  border-bottom: 1px solid black;
  vertical-align: bottom;
}
div.rendered_html tr,
div.rendered_html th,
div.rendered_html td {
  text-align: right;
  vertical-align: middle;
  padding: 0.5em 0.5em;
  line-height: normal;
  white-space: normal;
  max-width: none;
  border: none;
}
div.rendered_html th {
  font-weight: bold;
}
div.rendered_html tbody tr:nth-child(odd) {
  background: #f5f5f5;
}
div.rendered_html tbody tr:hover {
  background: rgba(66, 165, 245, 0.2);
}

/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast.container,
.nboutput.nblast.container {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast.container + .nbinput.container {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><a class="reference external" href="https://github.com/natashabatalha/picaso/tree/master/docs/notebooks/codehelp/data_uniformity_tutorial.ipynb">Download full notebook here</a></p>
</div>
<div class="section" id="Model-Formating-Overview">
<h1>Model Formating Overview<a class="headerlink" href="#Model-Formating-Overview" title="Permalink to this headline">¶</a></h1>
<p>This notebook was created to enable common formatting for the Early Release Science modeling initiatives. We will review:</p>
<ol class="arabic simple">
<li><p>Variable terminology</p></li>
<li><p>File naming schemes</p></li>
<li><p>Data formating</p></li>
<li><p>Physical unit archiving</p></li>
</ol>
<p>This is namely for the booking of the following model types:</p>
<ol class="arabic simple">
<li><p>1D-3D climate (spatial- and/or altitude- dependent climate)</p></li>
<li><p>1D-3D chemistry (spatial- and/or altitude- dependent atmospheric composition)</p></li>
<li><p>1D-3D cloud (spatial- and/or altitude- dependent single scattering, asymmetries, cloud optical depth)</p></li>
<li><p>Spectroscopy (flux, transit depth as a function of wavelength)</p></li>
</ol>
<p>However, it can be applied to other modeling products (e.g. mixing profiles).</p>
<div class="section" id="Variable-Terminology">
<h2>Variable Terminology<a class="headerlink" href="#Variable-Terminology" title="Permalink to this headline">¶</a></h2>
<p>All file names and meta data should conform to the following variable names. Note, that these will not apply to all models. This is just an initial list. Please shoot me a DM, or slack for additional parameters to add (<a class="reference external" href="mailto:natasha&#46;e&#46;batalha&#37;&#52;&#48;nasa&#46;gov">natasha<span>&#46;</span>e<span>&#46;</span>batalha<span>&#64;</span>nasa<span>&#46;</span>gov</a>, or ERS slack channel)</p>
<div class="section" id="Planet-parameters-(planet_params)">
<h3>Planet parameters (<code class="docutils literal notranslate"><span class="pre">planet_params</span></code>)<a class="headerlink" href="#Planet-parameters-(planet_params)" title="Permalink to this headline">¶</a></h3>
<ol class="arabic simple">
<li><p><code class="docutils literal notranslate"><span class="pre">tint</span></code>: object internal temperature</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">heat_redis</span></code>: heat redistribution (only relevant for irradiated objects)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">rp</span></code>: planet radius</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">mp</span></code>: planet mass</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">p_reference</span></code>: reference pressure radius</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pteff</span></code>: planetary effective temperature</p></li>
</ol>
</div>
<div class="section" id="Stellar-parameters-(stellar_params)">
<h3>Stellar parameters (<code class="docutils literal notranslate"><span class="pre">stellar_params</span></code>)<a class="headerlink" href="#Stellar-parameters-(stellar_params)" title="Permalink to this headline">¶</a></h3>
<ol class="arabic simple">
<li><p><code class="docutils literal notranslate"><span class="pre">logg</span></code> : gravity</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">feh</span></code> : stellar metallicity</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">steff</span></code> : stellar effective temperature</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">rs</span></code> : stellar radius</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ms</span></code> : stellar mass</p></li>
</ol>
</div>
<div class="section" id="Orbital-parameters-(orbit_params)">
<h3>Orbital parameters (<code class="docutils literal notranslate"><span class="pre">orbit_params</span></code>)<a class="headerlink" href="#Orbital-parameters-(orbit_params)" title="Permalink to this headline">¶</a></h3>
<ol class="arabic simple">
<li><p><code class="docutils literal notranslate"><span class="pre">sma</span></code> : semi-major axis</p></li>
</ol>
</div>
<div class="section" id="Atmospheric-parameters-(atmo_params)">
<h3>Atmospheric parameters (<code class="docutils literal notranslate"><span class="pre">atmo_params</span></code>)<a class="headerlink" href="#Atmospheric-parameters-(atmo_params)" title="Permalink to this headline">¶</a></h3>
<ol class="arabic simple">
<li><p><code class="docutils literal notranslate"><span class="pre">mh</span></code> : metallicity</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cto</span></code> : carbon to oxygen ratio</p></li>
<li><p>case sensitive molecule names (e.g. Na, H2O, TiO)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">temperature</span></code>: computed</p></li>
</ol>
</div>
<div class="section" id="Cloud-parameters-(cld_params)">
<h3>Cloud parameters (<code class="docutils literal notranslate"><span class="pre">cld_params</span></code>)<a class="headerlink" href="#Cloud-parameters-(cld_params)" title="Permalink to this headline">¶</a></h3>
<ol class="arabic simple">
<li><p><code class="docutils literal notranslate"><span class="pre">opd</span></code> : extinction optical depth</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ssa</span></code> : single scattering albedo</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">asy</span></code> : asymmetry parameter</p></li>
</ol>
</div>
<div class="section" id="Model-Gridding">
<h3>Model Gridding<a class="headerlink" href="#Model-Gridding" title="Permalink to this headline">¶</a></h3>
<ol class="arabic simple">
<li><p><code class="docutils literal notranslate"><span class="pre">pressure</span></code>: pressure grid</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">wavelength</span></code>: wavelength grid</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">wno</span></code>: wavenumber grid</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">lat</span></code>: latitude grid</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">lon</span></code>: longitude grid</p></li>
</ol>
</div>
</div>
</div>
<div class="section" id="Specifying-units">
<h1>Specifying units<a class="headerlink" href="#Specifying-units" title="Permalink to this headline">¶</a></h1>
<p>We should be able to convert all units to <code class="docutils literal notranslate"><span class="pre">astropy.units</span></code>. For unitless parameters (e.g. single scattering albedo, optical depth) unitless designation should be provided. See example:</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[1]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="kn">import</span> <span class="nn">astropy.units</span> <span class="k">as</span> <span class="nn">u</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[2]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1">#examples of valid units</span>

<span class="n">u</span><span class="o">.</span><span class="n">Unit</span><span class="p">(</span><span class="s1">&#39;cm&#39;</span><span class="p">)</span> <span class="c1">#Valid</span>
<span class="c1">#u.Unit(&#39;CM&#39;) #NOT valid</span>
<span class="n">u</span><span class="o">.</span><span class="n">Unit</span><span class="p">(</span><span class="s2">&quot;R_jup&quot;</span><span class="p">)</span><span class="c1">#Valid</span>
<span class="n">u</span><span class="o">.</span><span class="n">Unit</span><span class="p">(</span><span class="s2">&quot;R_jupiter&quot;</span><span class="p">)</span><span class="c1">#Valid</span>
<span class="c1">#u.Unit(&quot;R_Jupiter&quot;)#NOT Valid</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[2]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="math notranslate nohighlight">
$\mathrm{R_{\rm J}}$</div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">unit</span> <span class="o">=</span> <span class="s1">&#39;cm&#39;</span>
<span class="c1">#doing it this away enables easy conversions. for example:</span>
<span class="p">(</span><span class="mi">1</span><span class="o">*</span><span class="n">u</span><span class="o">.</span><span class="n">Unit</span><span class="p">(</span><span class="s1">&#39;R_jup&#39;</span><span class="p">))</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="s1">&#39;cm&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="math notranslate nohighlight">
$7.1492 \times 10^{9} \; \mathrm{cm}$</div></div>
</div>
</div>
<div class="section" id="Data-Types:-Using-xarray">
<h1>Data Types: Using <code class="docutils literal notranslate"><span class="pre">xarray</span></code><a class="headerlink" href="#Data-Types:-Using-xarray" title="Permalink to this headline">¶</a></h1>
<p><a class="reference external" href="https://docs.xarray.dev/en/stable/">xarray: N-D labeled arrays and datasets in Python</a>: From their website: “array introduces labels in the form of dimensions, coordinates and attributes on top of raw NumPy-like arrays, which allows for a more intuitive, more concise, and less error-prone developer experience. The package includes a large and growing library of domain-agnostic functions for advanced analytics and visualization with these data structures.”</p>
<p>Xarray is your friend and will make it very easy for other folks to use your data. Let’s build some simple examples.</p>
<p>This is how we make sure we credit the appropriate people for their work, and understand the meta data surrounding the model runs.</p>
<ol class="arabic simple">
<li><p>Author list</p></li>
<li><p>point of contact</p></li>
<li><p>code used (can be a dictionary. e.g. {‘chemistry’:‘vulcan’, ‘cloud’:‘virga’, ‘spectra’:‘chimera’}</p></li>
</ol>
<ol class="arabic simple">
<li><p>doi : made sure to include if you want your work referenced!</p></li>
<li><p>planet_params (with keys defined in section 1)</p></li>
<li><p>stellar_params</p></li>
<li><p>orbit_params</p></li>
<li><p>atmo_params</p></li>
</ol>
<div class="section" id="Easy-Example:-1D-data:-e.g. P-T-profiles,-chemistry">
<h2>Easy Example: 1D data: e.g. P-T profiles, chemistry<a class="headerlink" href="#Easy-Example:-1D-data:-e.g. P-T-profiles,-chemistry" title="Permalink to this headline">¶</a></h2>
<p>Here we will show an example with <code class="docutils literal notranslate"><span class="pre">pressure</span></code> as the dependent variable. Spectra, which are on a wavelength or wavenumber grid, can also be stored similarly.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[4]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">xarray</span> <span class="k">as</span> <span class="nn">xr</span>
<span class="kn">import</span> <span class="nn">json</span> <span class="c1">#we will use this to dump model parameters into an attribute</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1">#fake pressure temperature profile at 1000 K</span>
<span class="n">pressure</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">logspace</span><span class="p">(</span><span class="o">-</span><span class="mi">6</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">50</span><span class="p">)</span>
<span class="n">temperature</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">logspace</span><span class="p">(</span><span class="o">-</span><span class="mi">6</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">50</span><span class="p">)</span><span class="o">*</span><span class="mi">0</span> <span class="o">+</span> <span class="mi">1000</span>
</pre></div>
</div>
</div>
<p>Practice convert to <code class="docutils literal notranslate"><span class="pre">xarray</span></code>. In this case we are storing <code class="docutils literal notranslate"><span class="pre">temperature</span></code> data, labeled with <code class="docutils literal notranslate"><span class="pre">unit</span></code> “Kelvin” that is on a grid of <code class="docutils literal notranslate"><span class="pre">pressure</span></code> with units of “bar”</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[6]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># put data into a dataset where each</span>
<span class="n">ds</span> <span class="o">=</span> <span class="n">xr</span><span class="o">.</span><span class="n">Dataset</span><span class="p">(</span>
    <span class="n">data_vars</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span>
        <span class="n">temperature</span><span class="o">=</span><span class="p">([</span><span class="s2">&quot;pressure&quot;</span><span class="p">],</span> <span class="n">temperature</span><span class="p">,{</span><span class="s1">&#39;units&#39;</span><span class="p">:</span> <span class="s1">&#39;Kelvin&#39;</span><span class="p">})</span><span class="c1">#, required</span>
    <span class="p">),</span>
    <span class="n">coords</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span>
        <span class="n">pressure</span><span class="o">=</span><span class="p">([</span><span class="s2">&quot;pressure&quot;</span><span class="p">],</span> <span class="n">pressure</span><span class="p">,{</span><span class="s1">&#39;units&#39;</span><span class="p">:</span> <span class="s1">&#39;bar&#39;</span><span class="p">})</span><span class="c1">#required*</span>
    <span class="p">),</span>
    <span class="n">attrs</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">author</span><span class="o">=</span><span class="s2">&quot;NE Batalha&quot;</span><span class="p">,</span><span class="c1">#required</span>
               <span class="n">contact</span><span class="o">=</span><span class="s2">&quot;natasha.e.batalha@nasa.gov&quot;</span><span class="p">,</span><span class="c1">#required</span>
               <span class="n">code</span><span class="o">=</span><span class="s2">&quot;numpy&quot;</span><span class="p">,</span> <span class="c1">#required</span>
               <span class="n">doi</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="c1">#optional if there is a citation to reference</span>
               <span class="n">planet_params</span><span class="o">=</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">({</span><span class="s1">&#39;rp&#39;</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;mp&#39;</span><span class="p">:</span><span class="mi">1</span><span class="p">}),</span> <span class="c1">#optional in accordance with model runs</span>
               <span class="n">stellar_params</span><span class="o">=</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">({</span><span class="s1">&#39;rs&#39;</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;ms&#39;</span><span class="p">:</span><span class="mi">1</span><span class="p">}),</span> <span class="c1">#optional in accordance with model runs</span>
              <span class="p">),</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[7]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1">#printing is easy</span>
<span class="n">ds</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[7]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div><svg style="position: absolute; width: 0; height: 0; overflow: hidden">
<defs>
<symbol id="icon-database" viewBox="0 0 32 32">
<path d="M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z"></path>
<path d="M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
<path d="M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
</symbol>
<symbol id="icon-file-text2" viewBox="0 0 32 32">
<path d="M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z"></path>
<path d="M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
</symbol>
</defs>
</svg>
<style>/* CSS stylesheet for displaying xarray objects in jupyterlab.
 *
 */

:root {
  --xr-font-color0: var(--jp-content-font-color0, rgba(0, 0, 0, 1));
  --xr-font-color2: var(--jp-content-font-color2, rgba(0, 0, 0, 0.54));
  --xr-font-color3: var(--jp-content-font-color3, rgba(0, 0, 0, 0.38));
  --xr-border-color: var(--jp-border-color2, #e0e0e0);
  --xr-disabled-color: var(--jp-layout-color3, #bdbdbd);
  --xr-background-color: var(--jp-layout-color0, white);
  --xr-background-color-row-even: var(--jp-layout-color1, white);
  --xr-background-color-row-odd: var(--jp-layout-color2, #eeeeee);
}

html[theme=dark],
body.vscode-dark {
  --xr-font-color0: rgba(255, 255, 255, 1);
  --xr-font-color2: rgba(255, 255, 255, 0.54);
  --xr-font-color3: rgba(255, 255, 255, 0.38);
  --xr-border-color: #1F1F1F;
  --xr-disabled-color: #515151;
  --xr-background-color: #111111;
  --xr-background-color-row-even: #111111;
  --xr-background-color-row-odd: #313131;
}

.xr-wrap {
  display: block;
  min-width: 300px;
  max-width: 700px;
}

.xr-text-repr-fallback {
  /* fallback to plain text repr when CSS is not injected (untrusted notebook) */
  display: none;
}

.xr-header {
  padding-top: 6px;
  padding-bottom: 6px;
  margin-bottom: 4px;
  border-bottom: solid 1px var(--xr-border-color);
}

.xr-header > div,
.xr-header > ul {
  display: inline;
  margin-top: 0;
  margin-bottom: 0;
}

.xr-obj-type,
.xr-array-name {
  margin-left: 2px;
  margin-right: 10px;
}

.xr-obj-type {
  color: var(--xr-font-color2);
}

.xr-sections {
  padding-left: 0 !important;
  display: grid;
  grid-template-columns: 150px auto auto 1fr 20px 20px;
}

.xr-section-item {
  display: contents;
}

.xr-section-item input {
  display: none;
}

.xr-section-item input + label {
  color: var(--xr-disabled-color);
}

.xr-section-item input:enabled + label {
  cursor: pointer;
  color: var(--xr-font-color2);
}

.xr-section-item input:enabled + label:hover {
  color: var(--xr-font-color0);
}

.xr-section-summary {
  grid-column: 1;
  color: var(--xr-font-color2);
  font-weight: 500;
}

.xr-section-summary > span {
  display: inline-block;
  padding-left: 0.5em;
}

.xr-section-summary-in:disabled + label {
  color: var(--xr-font-color2);
}

.xr-section-summary-in + label:before {
  display: inline-block;
  content: '►';
  font-size: 11px;
  width: 15px;
  text-align: center;
}

.xr-section-summary-in:disabled + label:before {
  color: var(--xr-disabled-color);
}

.xr-section-summary-in:checked + label:before {
  content: '▼';
}

.xr-section-summary-in:checked + label > span {
  display: none;
}

.xr-section-summary,
.xr-section-inline-details {
  padding-top: 4px;
  padding-bottom: 4px;
}

.xr-section-inline-details {
  grid-column: 2 / -1;
}

.xr-section-details {
  display: none;
  grid-column: 1 / -1;
  margin-bottom: 5px;
}

.xr-section-summary-in:checked ~ .xr-section-details {
  display: contents;
}

.xr-array-wrap {
  grid-column: 1 / -1;
  display: grid;
  grid-template-columns: 20px auto;
}

.xr-array-wrap > label {
  grid-column: 1;
  vertical-align: top;
}

.xr-preview {
  color: var(--xr-font-color3);
}

.xr-array-preview,
.xr-array-data {
  padding: 0 5px !important;
  grid-column: 2;
}

.xr-array-data,
.xr-array-in:checked ~ .xr-array-preview {
  display: none;
}

.xr-array-in:checked ~ .xr-array-data,
.xr-array-preview {
  display: inline-block;
}

.xr-dim-list {
  display: inline-block !important;
  list-style: none;
  padding: 0 !important;
  margin: 0;
}

.xr-dim-list li {
  display: inline-block;
  padding: 0;
  margin: 0;
}

.xr-dim-list:before {
  content: '(';
}

.xr-dim-list:after {
  content: ')';
}

.xr-dim-list li:not(:last-child):after {
  content: ',';
  padding-right: 5px;
}

.xr-has-index {
  font-weight: bold;
}

.xr-var-list,
.xr-var-item {
  display: contents;
}

.xr-var-item > div,
.xr-var-item label,
.xr-var-item > .xr-var-name span {
  background-color: var(--xr-background-color-row-even);
  margin-bottom: 0;
}

.xr-var-item > .xr-var-name:hover span {
  padding-right: 5px;
}

.xr-var-list > li:nth-child(odd) > div,
.xr-var-list > li:nth-child(odd) > label,
.xr-var-list > li:nth-child(odd) > .xr-var-name span {
  background-color: var(--xr-background-color-row-odd);
}

.xr-var-name {
  grid-column: 1;
}

.xr-var-dims {
  grid-column: 2;
}

.xr-var-dtype {
  grid-column: 3;
  text-align: right;
  color: var(--xr-font-color2);
}

.xr-var-preview {
  grid-column: 4;
}

.xr-var-name,
.xr-var-dims,
.xr-var-dtype,
.xr-preview,
.xr-attrs dt {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  padding-right: 10px;
}

.xr-var-name:hover,
.xr-var-dims:hover,
.xr-var-dtype:hover,
.xr-attrs dt:hover {
  overflow: visible;
  width: auto;
  z-index: 1;
}

.xr-var-attrs,
.xr-var-data {
  display: none;
  background-color: var(--xr-background-color) !important;
  padding-bottom: 5px !important;
}

.xr-var-attrs-in:checked ~ .xr-var-attrs,
.xr-var-data-in:checked ~ .xr-var-data {
  display: block;
}

.xr-var-data > table {
  float: right;
}

.xr-var-name span,
.xr-var-data,
.xr-attrs {
  padding-left: 25px !important;
}

.xr-attrs,
.xr-var-attrs,
.xr-var-data {
  grid-column: 1 / -1;
}

dl.xr-attrs {
  padding: 0;
  margin: 0;
  display: grid;
  grid-template-columns: 125px auto;
}

.xr-attrs dt,
.xr-attrs dd {
  padding: 0;
  margin: 0;
  float: left;
  padding-right: 10px;
  width: auto;
}

.xr-attrs dt {
  font-weight: normal;
  grid-column: 1;
}

.xr-attrs dt:hover span {
  display: inline-block;
  background: var(--xr-background-color);
  padding-right: 10px;
}

.xr-attrs dd {
  grid-column: 2;
  white-space: pre-wrap;
  word-break: break-all;
}

.xr-icon-database,
.xr-icon-file-text2 {
  display: inline-block;
  vertical-align: middle;
  width: 1em;
  height: 1.5em !important;
  stroke-width: 0;
  stroke: currentColor;
  fill: currentColor;
}
</style><pre class='xr-text-repr-fallback'>&lt;xarray.Dataset&gt;
Dimensions:      (pressure: 50)
Coordinates:
  * pressure     (pressure) float64 1e-06 1.456e-06 2.121e-06 ... 68.66 100.0
Data variables:
    temperature  (pressure) float64 1e+03 1e+03 1e+03 ... 1e+03 1e+03 1e+03
Attributes:
    author:          NE Batalha
    contact:         natasha.e.batalha@nasa.gov
    code:            numpy
    doi:
    planet_params:   {&quot;rp&quot;: 1, &quot;mp&quot;: 1}
    stellar_params:  {&quot;rs&quot;: 1, &quot;ms&quot;: 1}</pre><div class='xr-wrap' hidden><div class='xr-header'><div class='xr-obj-type'>xarray.Dataset</div></div><ul class='xr-sections'><li class='xr-section-item'><input id='section-83da3867-4647-470b-ac4e-f7df34e11c0f' class='xr-section-summary-in' type='checkbox' disabled ><label for='section-83da3867-4647-470b-ac4e-f7df34e11c0f' class='xr-section-summary'  title='Expand/collapse section'>Dimensions:</label><div class='xr-section-inline-details'><ul class='xr-dim-list'><li><span class='xr-has-index'>pressure</span>: 50</li></ul></div><div class='xr-section-details'></div></li><li class='xr-section-item'><input id='section-6f9eb649-588f-4d50-a487-27a4517980e9' class='xr-section-summary-in' type='checkbox'  checked><label for='section-6f9eb649-588f-4d50-a487-27a4517980e9' class='xr-section-summary' >Coordinates: <span>(1)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>pressure</span></div><div class='xr-var-dims'>(pressure)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>1e-06 1.456e-06 ... 68.66 100.0</div><input id='attrs-ea2e3122-c34c-4618-9649-13a88b6b6690' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-ea2e3122-c34c-4618-9649-13a88b6b6690' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-ff92b679-c0b8-4cc4-86ba-b58d54d686e2' class='xr-var-data-in' type='checkbox'><label for='data-ff92b679-c0b8-4cc4-86ba-b58d54d686e2' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>units :</span></dt><dd>bar</dd></dl></div><div class='xr-var-data'><pre>array([1.000000e-06, 1.456348e-06, 2.120951e-06, 3.088844e-06, 4.498433e-06,
       6.551286e-06, 9.540955e-06, 1.389495e-05, 2.023590e-05, 2.947052e-05,
       4.291934e-05, 6.250552e-05, 9.102982e-05, 1.325711e-04, 1.930698e-04,
       2.811769e-04, 4.094915e-04, 5.963623e-04, 8.685114e-04, 1.264855e-03,
       1.842070e-03, 2.682696e-03, 3.906940e-03, 5.689866e-03, 8.286428e-03,
       1.206793e-02, 1.757511e-02, 2.559548e-02, 3.727594e-02, 5.428675e-02,
       7.906043e-02, 1.151395e-01, 1.676833e-01, 2.442053e-01, 3.556480e-01,
       5.179475e-01, 7.543120e-01, 1.098541e+00, 1.599859e+00, 2.329952e+00,
       3.393222e+00, 4.941713e+00, 7.196857e+00, 1.048113e+01, 1.526418e+01,
       2.222996e+01, 3.237458e+01, 4.714866e+01, 6.866488e+01, 1.000000e+02])</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-402f0c04-43c5-4fb1-85d9-ed9a2a64f509' class='xr-section-summary-in' type='checkbox'  checked><label for='section-402f0c04-43c5-4fb1-85d9-ed9a2a64f509' class='xr-section-summary' >Data variables: <span>(1)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span>temperature</span></div><div class='xr-var-dims'>(pressure)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>1e+03 1e+03 1e+03 ... 1e+03 1e+03</div><input id='attrs-ea24c3ea-886a-4048-bef6-ef1ae86cd03c' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-ea24c3ea-886a-4048-bef6-ef1ae86cd03c' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-b8f36b8a-6447-4f9c-bd58-53a3e123f282' class='xr-var-data-in' type='checkbox'><label for='data-b8f36b8a-6447-4f9c-bd58-53a3e123f282' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>units :</span></dt><dd>Kelvin</dd></dl></div><div class='xr-var-data'><pre>array([1000., 1000., 1000., 1000., 1000., 1000., 1000., 1000., 1000.,
       1000., 1000., 1000., 1000., 1000., 1000., 1000., 1000., 1000.,
       1000., 1000., 1000., 1000., 1000., 1000., 1000., 1000., 1000.,
       1000., 1000., 1000., 1000., 1000., 1000., 1000., 1000., 1000.,
       1000., 1000., 1000., 1000., 1000., 1000., 1000., 1000., 1000.,
       1000., 1000., 1000., 1000., 1000.])</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-597586b9-2475-48e3-b6bb-3bd73667b46b' class='xr-section-summary-in' type='checkbox'  checked><label for='section-597586b9-2475-48e3-b6bb-3bd73667b46b' class='xr-section-summary' >Attributes: <span>(6)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><dl class='xr-attrs'><dt><span>author :</span></dt><dd>NE Batalha</dd><dt><span>contact :</span></dt><dd>natasha.e.batalha@nasa.gov</dd><dt><span>code :</span></dt><dd>numpy</dd><dt><span>doi :</span></dt><dd></dd><dt><span>planet_params :</span></dt><dd>{&quot;rp&quot;: 1, &quot;mp&quot;: 1}</dd><dt><span>stellar_params :</span></dt><dd>{&quot;rs&quot;: 1, &quot;ms&quot;: 1}</dd></dl></div></li></ul></div></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[8]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1">#plotting is easy</span>
<span class="n">ds</span><span class="p">[</span><span class="s1">&#39;temperature&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">y</span><span class="o">=</span><span class="s1">&#39;pressure&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[8]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[&lt;matplotlib.lines.Line2D at 0x7f812ce4daf0&gt;]
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/notebooks_codehelp_data_uniformity_tutorial_11_1.png" src="../../_images/notebooks_codehelp_data_uniformity_tutorial_11_1.png" />
</div>
</div>
<div class="section" id="Looping-to-add-many-variables-to-data_vars">
<h3>Looping to add many variables to <code class="docutils literal notranslate"><span class="pre">data_vars</span></code><a class="headerlink" href="#Looping-to-add-many-variables-to-data_vars" title="Permalink to this headline">¶</a></h3>
<p>If you have a big table of many parameters, e.g. molecules you can pre-make <code class="docutils literal notranslate"><span class="pre">data_vars</span></code> as a dictionary then add it like this:</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[9]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">fake_chemistry</span> <span class="o">=</span> <span class="p">{</span><span class="n">i</span><span class="p">:</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">pressure</span><span class="p">))</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;H2O&#39;</span><span class="p">,</span><span class="s1">&#39;CH4&#39;</span><span class="p">,</span><span class="s1">&#39;CO2&#39;</span><span class="p">,</span><span class="s1">&#39;CO&#39;</span><span class="p">,</span><span class="s2">&quot;H2S&quot;</span><span class="p">]}</span>

<span class="n">data_vars</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span>
        <span class="n">temperature</span><span class="o">=</span><span class="p">([</span><span class="s2">&quot;pressure&quot;</span><span class="p">],</span> <span class="n">temperature</span><span class="p">,{</span><span class="s1">&#39;units&#39;</span><span class="p">:</span> <span class="s1">&#39;Kelvin&#39;</span><span class="p">})</span><span class="c1">#, required</span>
    <span class="p">)</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">fake_chemistry</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
    <span class="n">data_vars</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="p">([</span><span class="n">i</span><span class="p">],</span> <span class="n">fake_chemistry</span><span class="p">[</span><span class="n">i</span><span class="p">],{</span><span class="s1">&#39;units&#39;</span><span class="p">:</span> <span class="s1">&#39;v/v&#39;</span><span class="p">})</span><span class="c1">#volume mixing ratio units</span>

<span class="c1"># put data into a dataset where each</span>
<span class="n">ds</span> <span class="o">=</span> <span class="n">xr</span><span class="o">.</span><span class="n">Dataset</span><span class="p">(</span>
    <span class="n">data_vars</span><span class="o">=</span><span class="n">data_vars</span><span class="p">,</span>
    <span class="n">coords</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span>
        <span class="n">pressure</span><span class="o">=</span><span class="p">([</span><span class="s2">&quot;pressure&quot;</span><span class="p">],</span> <span class="n">pressure</span><span class="p">,{</span><span class="s1">&#39;units&#39;</span><span class="p">:</span> <span class="s1">&#39;bar&#39;</span><span class="p">})</span><span class="c1">#required*</span>
    <span class="p">),</span>
    <span class="n">attrs</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">author</span><span class="o">=</span><span class="s2">&quot;NE Batalha&quot;</span><span class="p">,</span><span class="c1">#required</span>
               <span class="n">contact</span><span class="o">=</span><span class="s2">&quot;natasha.e.batalha@nasa.gov&quot;</span><span class="p">,</span><span class="c1">#required</span>
               <span class="n">code</span><span class="o">=</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">({</span><span class="s1">&#39;climate&#39;</span><span class="p">:</span><span class="s2">&quot;numpy&quot;</span><span class="p">,</span><span class="s2">&quot;chemistry&quot;</span><span class="p">:</span><span class="s1">&#39;numpy&#39;</span><span class="p">}),</span> <span class="c1">#required</span>
               <span class="n">doi</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="c1">#optional if there is a citation to reference</span>
               <span class="n">planet_params</span><span class="o">=</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">({</span><span class="s1">&#39;rp&#39;</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;mp&#39;</span><span class="p">:</span><span class="mi">1</span><span class="p">}),</span> <span class="c1">#optional in accordance with model runs</span>
               <span class="n">stellar_params</span><span class="o">=</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">({</span><span class="s1">&#39;rs&#39;</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;ms&#39;</span><span class="p">:</span><span class="mi">1</span><span class="p">}),</span> <span class="c1">#optional in accordance with model runs</span>
              <span class="p">),</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="2D-data:-e.g. cloud-profiles-with-pressure-vs-wavenumber">
<h2>2D data: e.g. cloud profiles with pressure vs wavenumber<a class="headerlink" href="#2D-data:-e.g. cloud-profiles-with-pressure-vs-wavenumber" title="Permalink to this headline">¶</a></h2>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[10]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">wno</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">10000</span><span class="p">,</span><span class="mi">400</span><span class="p">)</span><span class="c1">#fake wavenumber array</span>
<span class="n">opd</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="nb">len</span><span class="p">(</span><span class="n">pressure</span><span class="p">),</span> <span class="nb">len</span><span class="p">(</span><span class="n">wno</span><span class="p">)))</span> <span class="o">+</span> <span class="mi">1</span>
<span class="n">ssa</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="nb">len</span><span class="p">(</span><span class="n">pressure</span><span class="p">),</span> <span class="nb">len</span><span class="p">(</span><span class="n">wno</span><span class="p">)))</span> <span class="o">+</span> <span class="mf">0.9</span>
<span class="n">asy</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="nb">len</span><span class="p">(</span><span class="n">pressure</span><span class="p">),</span> <span class="nb">len</span><span class="p">(</span><span class="n">wno</span><span class="p">)))</span> <span class="o">+</span> <span class="mf">0.8</span>

<span class="c1"># put data into a dataset where each</span>
<span class="n">ds</span> <span class="o">=</span> <span class="n">xr</span><span class="o">.</span><span class="n">Dataset</span><span class="p">(</span>
    <span class="c1">#now data is a function of two dimensions</span>
    <span class="n">data_vars</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">opd</span><span class="o">=</span><span class="p">([</span><span class="s2">&quot;pressure&quot;</span><span class="p">,</span><span class="s2">&quot;wno&quot;</span><span class="p">],</span> <span class="n">opd</span><span class="p">,{</span><span class="s1">&#39;units&#39;</span><span class="p">:</span> <span class="s1">&#39;unitless per layer&#39;</span><span class="p">}),</span>
                   <span class="n">ssa</span><span class="o">=</span><span class="p">([</span><span class="s2">&quot;pressure&quot;</span><span class="p">,</span><span class="s2">&quot;wno&quot;</span><span class="p">],</span> <span class="n">ssa</span><span class="p">,{</span><span class="s1">&#39;units&#39;</span><span class="p">:</span> <span class="s1">&#39;unitless&#39;</span><span class="p">}),</span>
                   <span class="n">asy</span><span class="o">=</span><span class="p">([</span><span class="s2">&quot;pressure&quot;</span><span class="p">,</span><span class="s2">&quot;wno&quot;</span><span class="p">],</span> <span class="n">asy</span><span class="p">,{</span><span class="s1">&#39;units&#39;</span><span class="p">:</span> <span class="s1">&#39;unitless&#39;</span><span class="p">}),</span>
                  <span class="p">),</span>
    <span class="n">coords</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span>
        <span class="n">pressure</span><span class="o">=</span><span class="p">([</span><span class="s2">&quot;pressure&quot;</span><span class="p">],</span> <span class="n">pressure</span><span class="p">,{</span><span class="s1">&#39;units&#39;</span><span class="p">:</span> <span class="s1">&#39;bar&#39;</span><span class="p">}),</span><span class="c1">#required</span>
        <span class="n">wno</span><span class="o">=</span><span class="p">([</span><span class="s2">&quot;wno&quot;</span><span class="p">],</span> <span class="n">wno</span><span class="p">,{</span><span class="s1">&#39;units&#39;</span><span class="p">:</span> <span class="s1">&#39;cm**(-1)&#39;</span><span class="p">})</span><span class="c1">#required</span>
    <span class="p">),</span>
    <span class="n">attrs</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">author</span><span class="o">=</span><span class="s2">&quot;NE Batalha&quot;</span><span class="p">,</span><span class="c1">#required</span>
               <span class="n">contact</span><span class="o">=</span><span class="s2">&quot;natasha.e.batalha@nasa.gov&quot;</span><span class="p">,</span><span class="c1">#required</span>
               <span class="n">code</span><span class="o">=</span><span class="s1">&#39;numpy&#39;</span><span class="p">,</span> <span class="c1">#required</span>
               <span class="n">doi</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="c1">#optional if there is a citation to reference</span>
               <span class="n">planet_params</span><span class="o">=</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">({</span><span class="s1">&#39;rp&#39;</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;mp&#39;</span><span class="p">:</span><span class="mi">1</span><span class="p">}),</span> <span class="c1">#optional in accordance with model runs</span>
               <span class="n">stellar_params</span><span class="o">=</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">({</span><span class="s1">&#39;rs&#39;</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;ms&#39;</span><span class="p">:</span><span class="mi">1</span><span class="p">}),</span> <span class="c1">#optional in accordance with model runs</span>
              <span class="p">),</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="3D-data:-e.g. GCM-pressure-grid">
<h2>3D data: e.g. GCM pressure grid<a class="headerlink" href="#3D-data:-e.g. GCM-pressure-grid" title="Permalink to this headline">¶</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">xarray</span></code> is incredibly useful for GCM work. <cite>Here is an example of how ``picaso`</cite> uses <code class="docutils literal notranslate"><span class="pre">xarray</span></code> and <code class="docutils literal notranslate"><span class="pre">xesfm</span></code> to do regridding and 3d calculations &lt;<a class="reference external" href="https://natashabatalha.github.io/picaso/notebooks/9a_3DInputsWithPICASOandXarray.html">https://natashabatalha.github.io/picaso/notebooks/9a_3DInputsWithPICASOandXarray.html</a>&gt;`__.</p>
<p>Here we’ll just show how to create a 3D gridded dataset.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[11]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">lat</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="o">-</span><span class="mi">90</span><span class="p">,</span><span class="mi">85</span><span class="p">,</span><span class="mi">40</span><span class="p">)</span><span class="c1">#fake latitude array</span>
<span class="n">lon</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="o">-</span><span class="mi">180</span><span class="p">,</span><span class="mi">175</span><span class="p">,</span><span class="mi">100</span><span class="p">)</span><span class="c1">#fake latitude array</span>
<span class="n">temperature_3d</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">lat</span><span class="p">),</span><span class="nb">len</span><span class="p">(</span><span class="n">lon</span><span class="p">),</span><span class="nb">len</span><span class="p">(</span><span class="n">pressure</span><span class="p">))</span>

<span class="c1"># put data into a dataset where each</span>
<span class="n">ds</span> <span class="o">=</span> <span class="n">xr</span><span class="o">.</span><span class="n">Dataset</span><span class="p">(</span>
    <span class="c1">#now data is a function of two dimensions</span>
    <span class="n">data_vars</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">temperature</span><span class="o">=</span><span class="p">([</span><span class="s2">&quot;lat&quot;</span><span class="p">,</span><span class="s2">&quot;lon&quot;</span><span class="p">,</span><span class="s2">&quot;pressure&quot;</span><span class="p">],</span><span class="n">temperature_3d</span> <span class="p">,{</span><span class="s1">&#39;units&#39;</span><span class="p">:</span> <span class="s1">&#39;Kelvin&#39;</span><span class="p">})</span>
                  <span class="p">),</span>
    <span class="n">coords</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span>
        <span class="n">pressure</span><span class="o">=</span><span class="p">([</span><span class="s2">&quot;pressure&quot;</span><span class="p">],</span> <span class="n">pressure</span><span class="p">,{</span><span class="s1">&#39;units&#39;</span><span class="p">:</span> <span class="s1">&#39;bar&#39;</span><span class="p">}),</span><span class="c1">#required</span>
        <span class="n">lat</span><span class="o">=</span><span class="p">([</span><span class="s2">&quot;lat&quot;</span><span class="p">],</span> <span class="n">lat</span><span class="p">,{</span><span class="s1">&#39;units&#39;</span><span class="p">:</span> <span class="s1">&#39;degree&#39;</span><span class="p">}),</span><span class="c1">#required</span>
        <span class="n">lon</span><span class="o">=</span><span class="p">([</span><span class="s2">&quot;lon&quot;</span><span class="p">],</span> <span class="n">lon</span><span class="p">,{</span><span class="s1">&#39;units&#39;</span><span class="p">:</span> <span class="s1">&#39;degree&#39;</span><span class="p">}),</span><span class="c1">#required</span>
    <span class="p">),</span>
    <span class="n">attrs</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">author</span><span class="o">=</span><span class="s2">&quot;NE Batalha&quot;</span><span class="p">,</span><span class="c1">#required</span>
               <span class="n">contact</span><span class="o">=</span><span class="s2">&quot;natasha.e.batalha@nasa.gov&quot;</span><span class="p">,</span><span class="c1">#required</span>
               <span class="n">code</span><span class="o">=</span><span class="s1">&#39;numpy&#39;</span><span class="p">,</span> <span class="c1">#required</span>
               <span class="n">doi</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="c1">#optional if there is a citation to reference</span>
               <span class="n">planet_params</span><span class="o">=</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">({</span><span class="s1">&#39;rp&#39;</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;mp&#39;</span><span class="p">:</span><span class="mi">1</span><span class="p">}),</span> <span class="c1">#optional in accordance with model runs</span>
               <span class="n">stellar_params</span><span class="o">=</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">({</span><span class="s1">&#39;rs&#39;</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;ms&#39;</span><span class="p">:</span><span class="mi">1</span><span class="p">})</span> <span class="c1">#optional in accordance with model runs</span>
              <span class="p">),</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[12]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1">#easy plotting</span>
<span class="n">ds</span><span class="p">[</span><span class="s1">&#39;temperature&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">isel</span><span class="p">(</span><span class="n">pressure</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[12]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&lt;matplotlib.collections.QuadMesh at 0x7f812da02940&gt;
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/notebooks_codehelp_data_uniformity_tutorial_18_1.png" src="../../_images/notebooks_codehelp_data_uniformity_tutorial_18_1.png" />
</div>
</div>
</div>
</div>
<div class="section" id="Storing-xarray-data">
<h1>Storing <code class="docutils literal notranslate"><span class="pre">xarray</span></code> data<a class="headerlink" href="#Storing-xarray-data" title="Permalink to this headline">¶</a></h1>
<div class="section" id="Filenaming">
<h2>Filenaming<a class="headerlink" href="#Filenaming" title="Permalink to this headline">¶</a></h2>
<p>We usually rely on a long filename to give us information about the model. If we properly use <code class="docutils literal notranslate"><span class="pre">attrs</span></code> then filenaming does not matter. However, friendly filenames are always appreciated by people using your models. We suggest the following naming convention.</p>
<p>Given independent variables (x,y,z): <code class="docutils literal notranslate"><span class="pre">tag_x{x}_y{y}_z{z}.nc</span></code></p>
<p>For example: <code class="docutils literal notranslate"><span class="pre">jupiter_mh1_teff1000_tint100.nc</span></code></p>
</div>
<div class="section" id="Using-netcdf">
<h2>Using <code class="docutils literal notranslate"><span class="pre">netcdf</span></code><a class="headerlink" href="#Using-netcdf" title="Permalink to this headline">¶</a></h2>
<p>“The recommended way to store xarray data structures is netCDF, which is a binary file format for self-described datasets that originated in the geosciences. Xarray is based on the netCDF data model, so netCDF files on disk directly correspond to Dataset objects (more accurately, a group in a netCDF file directly corresponds to a Dataset object. See Groups for more.)” - <cite>Quoted from``xarray`</cite> website &lt;<a class="reference external" href="https://docs.xarray.dev/en/stable/user-guide/io.html">https://docs.xarray.dev/en/stable/user-guide/io.html</a>&gt;`__</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[14]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">ds</span><span class="o">.</span><span class="n">to_netcdf</span><span class="p">(</span><span class="s2">&quot;fakeplanet_1000teq.nc&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="Using-pickle">
<h2>Using <code class="docutils literal notranslate"><span class="pre">pickle</span></code><a class="headerlink" href="#Using-pickle" title="Permalink to this headline">¶</a></h2>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[16]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="kn">import</span> <span class="nn">pickle</span> <span class="k">as</span> <span class="nn">pk</span>
<span class="n">pk</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">ds</span><span class="p">,</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;fakeplanet_1000teq.pk&quot;</span><span class="p">,</span><span class="s1">&#39;wb&#39;</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span>
</pre></div>
</div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>